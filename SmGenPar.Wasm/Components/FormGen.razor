@using Microsoft.AspNetCore.Components.Rendering
@using System.Collections
@using System.ComponentModel
@using System.ComponentModel.DataAnnotations
@using System.Globalization
@using System.Linq.Expressions
@using System.Reflection
@using System.Text.Json
@using SmGenPar.Logic.Models
@using SmGenPar.Logic.Reflection

<EditForm Model="@Model"
          OnSubmit="@OnSubmit"
          OnValidSubmit="@OnValidSubmit"
          OnInvalidSubmit="@OnInvalidSubmit">
    @(RenderForm())
    @ChildContent
</EditForm>

@code {
    
    [Parameter]
    public object? Model { get; set; }

    [Parameter]
    public EventCallback<EditContext> OnSubmit { get; set; }

    [Parameter]
    public EventCallback<EditContext> OnValidSubmit { get; set; }

    [Parameter]
    public EventCallback<EditContext> OnInvalidSubmit { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    RenderFragment RenderForm() => builder =>
    {
        ObjectFormRender.RenderModel(builder, Model!);
    };
}
